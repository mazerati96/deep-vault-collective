<!--  Dynamic stats powered by dashboard-stats.js ‚Äî queries Firestore /progress collection  -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Author Dashboard | Deep Vault Collective</title>
    <link rel="stylesheet" href="../css/global.css" />
    <link rel="stylesheet" href="../css/style.css" />
    <link rel="stylesheet" href="../css/dashboard.css" />
</head>
<body>

    <!-- Hamburger Menu -->
    <div class="hamburger-menu">
        <span></span>
        <span></span>
        <span></span>
    </div>

    <!-- Navigation Overlay -->
    <div class="nav-overlay">
        <ul class="nav-menu">
            <li><a href="starmap.html">HOME</a></li>
            <li><a href="about.html">ABOUT THE AUTHOR</a></li>
            <li><a href="worlds.html">WORLDS & STORIES</a></li>
            <li><a href="blog.html">BLOG</a></li>
            <li><a href="contact.html">CONTACT</a></li>
            <li><a href="author-login.html">AUTHOR LOGIN</a></li>
        </ul>
    </div>

    <!-- Page Transition -->
    <div class="page-transition"></div>

    <!-- Top bar -->
    <div class="dashboard-header">
        <h1 class="dashboard-title">AUTHOR DASHBOARD</h1>
        <button id="logoutBtn" class="logout-btn">LOGOUT</button>
    </div>

    <!-- Main content -->
    <div class="dashboard-container">

        <!-- Welcome section -->
        <div class="welcome-section">
            <h2 class="section-title">Welcome, Author</h2>
            <p class="welcome-text">Logged in as: <span id="userEmail"></span></p>
        </div>

        <!-- Quick actions -->
        <div class="actions-grid">

            <div class="action-card">
                <div class="card-icon">üìù</div>
                <h3 class="card-title">Edit Blog</h3><br />
                <p class="card-desc">Create and manage blog posts</p><br />
                <a href="blog-post.html" class="work-btn primary world-page-btn">Blog Posts Page</a>
            </div>

            <div class="action-card">
                <div class="card-icon">üó∫Ô∏è</div>
                <h3 class="card-title">Progress Bar Editor</h3><br />
                <p class="card-desc">Update each planet's respective page</p><br />
                <a href="worlds.html" class="work-btn primary world-page-btn">Go To Worlds to Update Progress</a>
            </div>

            <div class="action-card">
                <div class="card-icon">üìß</div>
                <h3 class="card-title">Messages</h3><br />
                <p class="card-desc">View contact form submissions</p><br />
                <button type="button" class="work-btn primary world-page-btn open-new-tab" data-url="https://workspace.google.com/intl/en-US/gmail/">Go To Gmail</button>
            </div>

        </div>

        <!-- Stats section ‚Äî values populated dynamically by dashboard-stats.js -->
        <div class="stats-section">

            <div class="stat-card">
                <!-- Count of progress docs where isComplete === true -->
                <div class="stat-value" id="stat-published">
                    <span class="stat-loading">‚Ä¶</span>
                </div>
                <div class="stat-label">Published Works</div>
            </div>

            <div class="stat-card">
                <!-- Count of progress docs where isComplete === false (or percent > 0) -->
                <div class="stat-value" id="stat-in-progress">
                    <span class="stat-loading">‚Ä¶</span>
                </div>
                <div class="stat-label">Works In Progress</div>
            </div>

            <div class="stat-card">
                <!-- Total number of docs in the progress collection -->
                <div class="stat-value" id="stat-worlds">
                    <span class="stat-loading">‚Ä¶</span>
                </div>
                <div class="stat-label">Worlds Mapped</div>
            </div>

        </div>

        <!-- Progress breakdown ‚Äî rendered by dashboard-stats.js -->
        <div class="progress-breakdown" id="progress-breakdown">
            <h3 class="breakdown-title">WORLD STATUS</h3>
            <div class="breakdown-list" id="breakdown-list">
                <!-- Rows injected here by JS -->
            </div>
        </div>

    </div>

    <script type="module" src="../auth/firebase-config.js"></script>
    <script type="module" src="../auth/dashboard.js"></script>
    <script type="module" src="../js/dashboard-stats.js"></script>
    <script src="../js/navigation.js"></script>
    <script type="module" src="../auth/auth-badge.js"></script>
    <script>
        (function () {
            document.addEventListener('click', function (e) {
                const btn = e.target.closest('.open-new-tab');
                if (!btn) return;
                const url = btn.getAttribute('data-url');
                if (!url) return;
                const newWin = window.open(url, '_blank');
                if (newWin) newWin.opener = null;
            });
        })();
    </script>
</body>
</html>