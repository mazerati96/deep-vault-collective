<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tales from the Vault | Deep Vault Collective</title>

    <!-- Quill Rich Text Editor CSS -->
    <link href="https://cdn.quilljs.com/1.3.7/quill.snow.css" rel="stylesheet">

    <link rel="stylesheet" href="../css/global.css" />
    <link rel="stylesheet" href="../css/blog.css" />
</head>
<body>

    <!-- Hamburger Menu -->
    <div class="hamburger-menu">
        <span></span>
        <span></span>
        <span></span>
    </div>

    <!-- Navigation Overlay -->
    <div class="nav-overlay">
        <ul class="nav-menu">
            <li><a href="starmap.html">HOME</a></li>
            <li><a href="about.html">ABOUT THE AUTHOR</a></li>
            <li><a href="worlds.html">WORLDS & STORIES</a></li>
            <li><a href="blog.html">BLOG</a></li>
            <li><a href="contact.html">CONTACT</a></li>
            <li><a href="author-login.html">AUTHOR LOGIN</a></li>
        </ul>
    </div>

    <!-- Page Transition -->
    <div class="page-transition"></div>

    <!-- Blog Container -->
    <div class="blog-container">

        <!-- Header -->
        <div class="blog-header">
            <h1 class="blog-title">TALES FROM THE VAULT</h1>
            <p class="blog-subtitle">Musings on worldbuilding, storytelling, and the creative process</p>

            <!-- PHASE 1: Search Bar -->
            <div class="search-container">
                <input type="text"
                       id="searchInput"
                       class="search-input"
                       placeholder="Search posts by title, content, or tags..." />
                <span class="search-icon">üîç</span>
            </div>

            <!-- PHASE 1: Category Filter Pills -->
            <div class="category-pills" id="categoryPills">
                <button class="pill-btn active" data-category="all">All Posts</button>
                <!-- Dynamic category pills will be added here -->
            </div>

            <!-- New Post Button (only visible when logged in) -->
            <button class="new-post-btn" id="newPostBtn" style="display: none;">
                <span class="btn-icon">‚ú¶</span> NEW POST
            </button>
        </div>

        <!-- Posts Grid -->
        <div class="posts-grid" id="postsGrid">
            <!-- Loading State -->
            <div class="loading-state" id="loadingState">
                <div class="loading-spinner"></div>
                <p>Loading tales...</p>
            </div>

            <!-- Empty State (shown when no posts) -->
            <div class="empty-state" id="emptyState" style="display: none;">
                <div class="empty-icon">üìñ</div>
                <h2>No Tales Found</h2>
                <p id="emptyMessage">The vault is currently empty. Check back soon for new stories!</p>
            </div>

            <!-- Posts will be inserted here by JavaScript -->
        </div>
    </div>

    <!-- ENHANCED Post Modal with Phase 1 Features -->
    <div class="modal" id="postModal" style="display: none;">
        <div class="modal-overlay" id="modalOverlay"></div>
        <div class="modal-content modal-enhanced">
            <div class="modal-header">
                <h2 class="modal-title" id="modalTitle">CREATE NEW POST</h2>
                <button class="modal-close" id="modalClose">‚úï</button>
            </div>

            <form class="post-form" id="postForm">

                <!-- Title Input -->
                <div class="form-group">
                    <label for="postTitle">POST TITLE *</label>
                    <input type="text"
                           id="postTitle"
                           name="title"
                           placeholder="Enter a captivating title..."
                           required
                           maxlength="200" />
                    <span class="char-count" id="titleCount">0 / 200</span>
                </div>

                <!-- Excerpt Input -->
                <div class="form-group">
                    <label for="postExcerpt">EXCERPT (PREVIEW TEXT) *</label>
                    <textarea id="postExcerpt"
                              name="excerpt"
                              rows="3"
                              placeholder="A brief preview of your post..."
                              required
                              maxlength="300"></textarea>
                    <span class="char-count" id="excerptCount">0 / 300</span>
                </div>

               
                   

                <!-- PHASE 1: Tags/Categories -->
                <div class="form-group">
                    <label for="tagsInput">TAGS / CATEGORIES</label>
                    <div class="tags-container">
                        <div class="tags-display" id="tagsDisplay"></div>
                        <input type="text"
                               id="tagsInput"
                               placeholder="Type tag and press Enter..."
                               class="tags-input" />
                    </div>
                    <div class="tag-suggestions" id="tagSuggestions"></div>
                    <input type="hidden" id="tagsData" name="tags" />
                </div>

                <!-- PHASE 1: Rich Text Editor (Quill) -->
                <div class="form-group">
                    <label>CONTENT *</label>
                    <div id="quillEditor" class="quill-container"></div>
                    <textarea id="postContent" name="content" style="display: none;" required></textarea>
                </div>

                <!-- Status Toggle -->
                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="postPublished" name="published" />
                        <span class="checkbox-text">PUBLISH IMMEDIATELY</span>
                        <small>Unchecked = save as draft</small>
                    </label>
                </div>

                <!-- Form Actions -->
                <div class="form-actions">
                    <button type="button" class="btn-secondary" id="cancelBtn">CANCEL</button>
                    <button type="submit" class="btn-primary" id="saveBtn">
                        <span class="btn-text">SAVE POST</span>
                        <span class="btn-loading" style="display: none;">SAVING...</span>
                    </button>
                </div>

                <!-- Hidden field for post ID (used when editing) -->
                <input type="hidden" id="postId" name="id" />
            </form>
        </div>
    </div>

    <!-- Quill Rich Text Editor JS -->
    <script src="https://cdn.quilljs.com/1.3.7/quill.min.js"></script>

    <!-- Scripts (all type="module") -->
    <script type="module" src="../auth/auth-badge.js"></script>
    <script src="../js/navigation.js"></script>
    <script type="module" src="../js/blog.js"></script>

</body>
</html>